import sys

input = sys.stdin.readline

N, M = map(int, input().split())
d = [[(0, 0), (0, 1), (0, 2), (0, 3)],
     [(0, 0), (1, 0), (2, 0), (3, 0)],
     [(0, 0), (1, 0), (0, 1), (1, 1)],
     [(0, 0), (1, 0), (2, 0), (2, 1)],
     [(0, 1), (1, 1), (2, 1), (2, 0)],
     [(0, 0), (0, 1), (1, 1), (2, 1)],
     [(0, 0), (0, 1), (1, 0), (2, 0)],
     [(0, 0), (1, 0), (1, 1), (1, 2)],
     [(0, 2), (1, 1), (1, 2), (1, 0)],
     [(0, 0), (0, 1), (0, 2), (1, 2)],
     [(0, 0), (1, 0), (0, 1), (0, 2)],
     [(0, 0), (1, 0), (1, 1), (2, 1)],
     [(0, 1), (1, 1), (1, 0), (2, 0)],
     [(1, 0), (1, 1), (0, 1), (0, 2)],
     [(0, 0), (0, 1), (1, 1), (1, 2)],
     [(0, 1), (1, 0), (1, 1), (1, 2)],
     [(0, 0), (0, 1), (0, 2), (1, 1)],
     [(0, 0), (1, 0), (1, 1), (2, 0)],
     [(0, 1), (1, 1), (1, 0), (2, 1)]]
arr = [list(map(int, input().split())) for _ in range(N)]
max_sum = 0

for i in range(N):
    for j in range(M):
        for items in d:
            s = 0
            for dx, dy in items:
                nx = j + dx
                ny = i + dy
                if 0 <= nx < M and 0 <= ny < N:
                    s += arr[ny][nx]
            max_sum = max(max_sum, s)

print(max_sum)
